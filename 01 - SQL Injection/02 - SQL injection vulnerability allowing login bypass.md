
### Penjelasan Query SQL Injection untuk Bypass Login

Lab ini mengandung kerentanannya di fungsi login, yang memungkinkan pelaku untuk mengeksploitasi SQL injection guna melakukan bypass login dan masuk sebagai pengguna administrator. Berikut adalah penjelasan secara detail mengenai bagaimana SQL injection ini terjadi dan bagaimana menggunakannya untuk mendapatkan akses ke aplikasi:

#### 1. **Memahami Query Asli pada Fungsi Login**  
   Fungsi login pada aplikasi ini menggunakan permintaan POST yang mengirimkan data username dan password ke server untuk proses autentikasi. Query SQL yang dijalankan oleh aplikasi saat login mungkin seperti ini:

   ```sql
   SELECT * FROM users WHERE username = 'username' AND password = 'password'
   ```

   Di mana `username` dan `password` adalah nilai yang dimasukkan oleh pengguna ke dalam formulir login. Aplikasi kemudian memverifikasi apakah ada data pengguna yang cocok di database berdasarkan query ini.

#### 2. **Mengidentifikasi Kerentanannya**  
   Kerentanannya terletak pada cara aplikasi menangani input pengguna tanpa melakukan validasi yang tepat. Jika aplikasi tidak memfilter karakter-karakter khusus dalam input seperti tanda kutip (`'`), maka kita bisa menyisipkan perintah SQL tambahan yang bisa mengubah logika query.

#### 3. **Eksploitasi SQL Injection untuk Bypass Login**  
   Untuk mengeksploitasi kerentanannya, kita dapat memasukkan payload berikut pada kolom password:

   ```
   '+OR+'1'='1
   ```

   Pada query yang asli, jika pengguna memasukkan username dan password, query yang akan dijalankan akan terlihat seperti ini:

   ```sql
   SELECT * FROM users WHERE username = 'admin' AND password = 'password'
   ```

   Namun, jika kita menyuntikkan payload di atas pada kolom password, maka query yang dikirimkan ke server akan berubah menjadi:

   ```sql
   SELECT * FROM users WHERE username = 'admin' AND password = ''+OR+'1'='1
   ```

   Mari kita analisis query ini lebih lanjut:
   - Bagian `'+OR+'1'='1` berfungsi untuk menyuntikkan kondisi yang selalu bernilai benar (`1 = 1`), sehingga query ini selalu berhasil, terlepas dari nilai password yang dimasukkan.
   - Karena `OR 1=1` selalu benar, query ini akan mengembalikan baris pengguna yang cocok dengan username `'admin'` (atau username apapun yang ada di database), dan password yang tidak relevan, sehingga login berhasil tanpa mempedulikan nilai password yang valid.

#### 4. **Hasil Eksekusi Query**  
   Dengan menggunakan payload `'+OR+'1'='1`, aplikasi akan menganggap bahwa autentikasi berhasil karena kondisi dalam query (`OR 1=1`) selalu bernilai benar. Sebagai hasilnya, pelaku dapat masuk ke dalam aplikasi sebagai pengguna apapun yang ada di dalam database, termasuk pengguna dengan akses administrator.

   **Payload yang digunakan:**
   ```
   /login?username=admin&password='+OR+'1'='1
   ```

   **Hasil:**  
   Setelah mengirimkan payload ini dalam permintaan POST, kita berhasil login sebagai pengguna administrator tanpa harus mengetahui password yang sebenarnya.

   ![Gambar 1](images/SQL%20injection%20vulnerability%20allowing%20login%20bypass/2.png)

#### 5. **Kesimpulan**  
   Teknik SQL injection yang digunakan dalam kasus ini memungkinkan kita untuk melewati proses login dengan cara menyuntikkan kondisi yang selalu benar, seperti `OR 1=1`. Ini menunjukkan pentingnya perlindungan terhadap input pengguna, seperti dengan menggunakan prepared statements atau query yang aman, untuk mencegah eksploitasi semacam ini.

### Referensi:
- [SQL Injection Vulnerability - PortSwigger](https://portswigger.net/web-security/sql-injection)
